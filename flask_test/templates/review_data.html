<!doctype html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jins_toolkit.css') }}">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename = 'js/bootstrap.js') }}"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js'></script>
    
    <script>
        $(document).ready(function update_charts() {

            $SCRIPT_ROOT = {{request.script_root | tojson | safe}};
            $.getJSON($SCRIPT_ROOT + "/_gestureplot",
                function(data) {
                    var one_gesture = data.gestures_with_all_trials[0];
                    for (one_gesture of data.gestures_with_all_trials){
                        add_one_chart(one_gesture.name, one_gesture.trials)
                        console.log(one_gesture);
                    }
                    
                    
                });
        });
        
        function add_one_chart(name, trials){
            var append_str = '\
<div  class="container">\
    <h3 >'+name+'</h3>\
    <div class="row flex-nowrap horizontal-scroll full-contatiner plot_div">\
';
            for( one_trial of trials) {
                console.log(one_trial);
                append_str += '\
        <div class="col-4">\
            <div class="card card-block" >\
                <div class="card-body">\
                    <h5 class="card-title">'+one_trial.id+'</h5>\
                    <canvas id="'+one_trial.id+'" ></canvas>\
                </div>\
            </div>\
        </div>';
                     
            }
            append_str += '</div>\n</div>';


            $(append_str ).appendTo( ".plot_charts" );
            
        }
        
        
        $(document).ready(function () {
//            {% if data_to_plot is not none %}   
//            
//            console.log("test")
//
//            // bar chart data
//            var barData = {
//                labels : [
//                  {% for one_label in labels %}
//                    "{{ one_label }}",
//                  {% endfor %}
//                ],
//
//                datasets : [{
//                  fillColor: "rgba(151,187,205,0.2)",
//                  strokeColor: "rgba(151,187,205,1)",
//                  pointColor: "rgba(151,187,205,1)",
//                  pointStrokeColor: "#fff",
//                  pointHighlightFill: "#fff",
//                  pointHighlightStroke: "rgba(151,187,205,1)",
//                  bezierCurve : false,
//                  data : [
//                {% for one_val in values %}
//                      {{ one_val }},
//                    {% endfor %}]
//                  }]
//            }
//
//            Chart.defaults.global.animationSteps = 50;
//            Chart.defaults.global.tooltipYPadding = 16;
//            Chart.defaults.global.tooltipCornerRadius = 0;
//            Chart.defaults.global.tooltipTitleFontStyle = "normal";
//            Chart.defaults.global.tooltipFillColor = "rgba(0,0,0,0.8)";
//            Chart.defaults.global.animationEasing = "easeOutBounce";
//            Chart.defaults.global.responsive = false;
//            Chart.defaults.global.scaleLineColor = "black";
//            Chart.defaults.global.scaleFontSize = 16;
//
//            // get bar chart canvas
//            var mychart = document.getElementById("chart0").getContext("2d");
//
//            steps = 10
//            max = {{ max }}
//            // draw bar chart
//            var LineChartDemo = new Chart(mychart).Line(barData, {
//                                                                    scaleOverride: true,
//                                                                    scaleSteps: steps,
//                                                                    scaleStepWidth: Math.ceil(max / steps),
//                                                                    scaleStartValue: 0,
//                                                                    scaleShowVerticalLines: true,
//                                                                    scaleShowGridLines : true,
//                                                                    barShowStroke : true,
//                                                                    scaleShowLabels: true,
//                                                                    bezierCurve: false,
//                                                                    });
//            {%endif %}
  
            
            
            
            // Variable to store current X scrolled position.
            var current = 0;
            // Pixel increment you wish on each wheel spin.
            var ScrollX_pixelPer = 10;
            $(".plot_div").on("mousewheel", function(e) {
                e.preventDefault();

                // Get the deltaY (always +/- 33.33333206176758) and multiply by the pixel increment you wish.
                var delta = ScrollX_pixelPer*(parseInt(e.originalEvent.deltaY)/33);

                // Increment/decrement current.
                current += delta;
                //console.log(current);

                console.log($(this).scrollTop() )
                // Apply the new position.
                $(this).scrollLeft($(this).scrollTop() + delta);

            });
            
            
            

});
    

      

    </script>

</head>

<body >
    <title>Jins Gesture Toolkit</title>
    
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">Jins Gesture Toolkit</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-item nav-link" href="/">Data collection</a>
                <a class="nav-item nav-link active" href="#">Data Review<span class="sr-only">(current)</span></a>
                <a class="nav-item nav-link" href="training">Training</a>
                <a class="nav-item nav-link" href="online_test">Online Testing</a>
            </div>
        </div>
    </nav>
    



    <div class="forms centerContainer">
        <form action="" method="POST">
            <div class="form-group">
                <label for="target_data_selection" class="font-weight-bold" id="test">1. Select target Data:</label>
                <select type="text" class="form-control" id="target_data_selection" >
                    {% for one_exp in available_exp %}
                    <option value="{{one_exp}}" SELECTED>{{one_exp}}</option>"
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="segment_type" class="font-weight-bold">2. Select segmentation type:</label>
                <select type="text" class="form-control" id="segment_type">
                    <option>Basic(1s Fixed window)</option>
<!--
                    <option>Full</option>
                    <option>Fixed window</option>
-->
                </select>
            </div>
            <button type="submit" name="action" value="startReview" class="btn btn-primary btn-lg">Start Review</button>
            
            

            <div class="border-top my-3"></div>
        </form>
    </div>
    
    <div id="plot_charts" class="container plot_charts">
    </div>

 
    

    
</body>

<!-- Footer -->
<footer class="page-footer font-small blue">

    <!-- Copyright -->
    <div class="footer-copyright text-center py-3">Â© 2020 Copyright:
        <a href=""> JY Lee</a>
    </div>
    <!-- Copyright -->

</footer>
<!-- Footer -->
